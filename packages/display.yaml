font:
  - file: "gfonts://Roboto"
    id: roboto_64
    size: 64
    glyphs: "0123456789.,Â°- %C"
  - file: "gfonts://Roboto"
    id: roboto_70
    size: 70
    glyphsets: [GF_Latin_Core]
  - file: "gfonts://Roboto"
    id: roboto_clock_huge
    size: 120
    glyphs: ":0123456789"

output:
  - platform: ledc
    pin: GPIO16
    id: backlight_pwm
    min_power: 0.07
    zero_means_zero: true
    frequency: 1000Hz

light:
  - platform: monochromatic
    output: backlight_pwm
    id: lcdbacklight
    name: "Display Helligkeit"
    icon: mdi:brightness-6
    restore_mode: ALWAYS_ON
    default_transition_length: 0.5s
    gamma_correct: 1.8

switch:
  - platform: gpio
    id: old_backlight_switch
    internal: true
    pin:
      ch422g: ch422g_hub
      number: 2
      mode:
        output: true
      inverted: false
    restore_mode: ALWAYS_ON

  - platform: template
    name: Antiburn
    id: switch_antiburn
    icon: mdi:television-shimmer
    optimistic: true
    entity_category: "config"
    turn_on_action:
      - if: {condition: lvgl.is_paused, then: [lvgl.resume, lvgl.widget.redraw]}
      - lvgl.pause: {show_snow: true}
    turn_off_action:
      - if: {condition: lvgl.is_paused, then: [lvgl.resume, lvgl.widget.redraw]}

touchscreen:
  platform: gt911
  id: my_touchscreen
  display: waveshare_display
  i2c_id: bus_a
  interrupt_pin: GPIO4
  reset_pin: {ch422g: ch422g_hub, number: 1, mode: OUTPUT}
  on_release:
    then:
      - if: {condition: lvgl.is_paused, then: [lvgl.resume, lvgl.widget.redraw]}

display:
  - platform: mipi_rgb
    model: ESP32-S3-TOUCH-LCD-7-800X480
    id: waveshare_display
